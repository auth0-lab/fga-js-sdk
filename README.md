# Sandcastle JS SDK

This is an autogenerated JS/TS Sandcastle SDK. It provides a wrapper around the Sandcastle API and includes TS typings.

## Table of Contents

- [About Sandcastle](#about-sandcastle)
- [Resources](#resources)
- [Installation](#installation)
- [Getting Started](#getting-started)
  - [Getting your Sandcastle Tenant, Client ID and Client Secret](#getting-your-sandcastle-tenant-client-id-and-client-secret)
  - [Initializing the Sandcastle API Client](#initializing-the-sandcastle-api-client)
  - [Calling the API](#calling-the-api)
    - [Check](#check)
    - [Write Tuples](#write-tuples)
    - [Delete Tuples](#delete-tuples)
    - [Expand](#expand)
    - [Read](#read)
    - [Write Namespaces Configuration](#write-namespaces-configuration)
    - [Read a Single Namespaces Configuration](#read-a-single-namespaces-configuration)
    - [Read All Namespaces Configuration](#read-all-namespaces-configuration)
- [License](#license)

## About Sandcastle

[Auth0 Sandcastle](https://learn.sandcastle.cloud) is the internal codename of an early-stage product we are building at Auth0 as part of [Auth0Lab](https://twitter.com/Auth0Lab/) to solve fine-grained authorization at scale.
If you are interested in learning more about our plans, please reach out via our <a target="_blank" href="https://discord.gg/pvbNmqC" rel="noreferrer">Discord chat</a>.

Please note:
* At this point in time, Sandcastle does not come with any SLAs; availability and uptime are not guaranteed.
* While this project is in it's early stages, the sdk methods are in flux and might change without a major bump

## Resources

- [Sandcastle Playground](https://learn.sandcastle.cloud)
- [Sandcastle Tutorials](https://learn.sandcastle.cloud/tutorials/gdrive)
- [Auth0Lab on Twitter](https://twitter.com/Auth0Lab/)
- [Discord Community](https://discord.gg/pvbNmqC)

## Installation

Using [npm](https://npmjs.org):

```shell
npm install sandcastle-sdk@0.0.1
```

Using [yarn](https://yarnpkg.com):

```shell
yarn add sandcastle-sdk@0.0.1
```

## Getting Started

### Getting your Sandcastle Tenant, Client ID and Client Secret
Currently, Sandcastle is at a PoC stage. You can request to join the PoC at https://discord.gg/8naAwJfWN6

### Initializing the Sandcastle API Client

```javascript
// Javascript
const { SandcastleApi } = require('sandcastle-sdk'); // OR import { SandcastleApi } from 'sandcastle-sdk';

const sandcastleApi = new SandcastleApi({
  tenant: SANDCASTLE_TENANT,
  clientId: SANDCASTLE_CLIENT_ID,
  clientSecret: SANDCASTLE_CLIENT_SECRET,
});
```


### Calling the API

#### Check
> Provide a tuple and ask Sandcastle to check for a relationship

```javascript
const { data } = await sandcastleApi.sandcastleCheck({
  tupleKey: {
    user,
    relation,
    object,
  },
});

// data = { allowed: true, resolution: "", zookie: "" }

```

#### Write Tuples

```javascript
const { data } = await sandcastleApi.sandcastleWrite({
  writes: {
    tupleKeys: [{ user, relation, object }, ...],
  },
});

// data = { zookie: "" }
```

#### Delete Tuples

```javascript
const { data } = await sandcastleApi.sandcastleWrite({
  deletes: {
    tupleKeys: [{ user, relation, object }, ...],
  },
});

// data = { zookie: "" }
```

#### Expand

```javascript
const { data } = await sandcastleApi.sandcastleExpand({
  tupleKey: {
    relation,
    object,
  },
});

// data = { tree: {...} }
```

#### Read

```javascript
const { data } = await sandcastleApi.sandcastleRead({
  reads: {
    tupleKeys: [
      {
        user,
        relation,
        object,
      },
    ],
  },
});

// data = { tuples: [{ key: { user, relation, object }, timestamp: ... }], zookie: "" }
```

#### Write Namespaces Configuration

```javascript
const { data } = await sandcastleApi.sandcastleWriteNamespaceConfiguration({
  namespaces: [{ name: "...", relations: {...} }],
});

// data = { id: "...", zookie: "" }
```

#### Read a Single Namespaces Configuration

```javascript
const { data } = await sandcastleApi.sandcastleReadNamespaceConfiguration(namespacesConfigId);

// data = { configuration: { id: "...", namespaces: { namespaces: [{ name: "...", relations: {...} }] } } }
```

#### Read All Namespaces Configuration

```javascript
const { data } = await sandcastleApi.sandcastleReadAllNamespaceConfigurations();

// data = { configurations: [{ id: "...", namespaces: { namespaces: [{ name: "...", relations: {...} }] } }] }
```


## License

This project is licensed under the MIT license. See the [LICENSE](https://github.com/auth0-lab/sandcastle-js-sdk/blob/main/LICENSE) file for more info.

The code in this repo was auto generated by [OpenAPI Generator](https://github.com/OpenAPITools/openapi-generator) from a template based on the [typescript-axios template](https://github.com/OpenAPITools/openapi-generator/tree/master/modules/openapi-generator/src/main/resources/typescript-axios) and [go template](https://github.com/OpenAPITools/openapi-generator/tree/master/modules/openapi-generator/src/main/resources/go), licensed under the [Apache License 2.0](https://github.com/OpenAPITools/openapi-generator/blob/master/LICENSE).
